/* Parse JSON file generated by Ruby code. 
Output random shuffled words*/
String.prototype.shuffle = function () {
    var a = this.split(""),
        n = a.length;
    for(var i = n - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var tmp = a[i];
        a[i] = a[j];
        a[j] = tmp;
    }
    return a.join("");
}
function getInputValue(correctLetter) {
    // Selecting the input element and get its value 
    let inputVal = document.getElementById(correctLetter).value;
    // Displaying the value
    if(inputVal.toUpperCase() === correctLetter){
        document.getElementById(correctLetter).style.color="green";
        //console.log("Correct",inputVal);
    }else{
        document.getElementById(correctLetter).style.color="red";
        //console.log("Error, this is not it " +inputVal);
    }
}

let total_words=0;
var text="";
var jumble_words=[];
var xhr=new XMLHttpRequest();
var my_data="https://raw.githubusercontent.com/ndlopez/jumble_game/main/static/jumble_words.json";
xhr.onreadystatechange=function(){
    if(this.readyState ==4 && this.status == 200){
        jumble_words = JSON.parse(this.responseText);
        //console.log(jumble_words);
        for (let jdx = 0; jdx < jumble_words.length; jdx++) {
            var jumble_word=jumble_words[jdx];
            jumble_word=jumble_word.toUpperCase();
            text += "<div class='row' id='shufWord'><h2>" + jumble_word.shuffle() + "</h2></div>";
            /* Build as many inputs as the length of a word*/
            text += "<div class='row' id='inputLetters'>";
            for (let idx = 0; idx < jumble_word.length; idx++) {
                text += "<div class='oneLetterCol'><input id='"+ jumble_word[idx]+"'></div>";
                //getInputValue(jumble_word[idx]);
            }
            text += "</div>";
            //console.log("inputs",text);
            document.getElementById("jumble_this_word").innerHTML = text;
        }
        total_words=jumble_words.length;
    }else{
        console.log("Error connecting to",my_data);
    }        
};
xhr.open("GET",my_data,true);
xhr.send();
console.log("my words",total_words);
